<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Auto-send 5 notifications</title>
</head>
<body onload="sendNotificationsOnLoad()">
<h1>Notifications will appear automatically</h1>

<script>
function sendNotificationsOnLoad() {
  // Verificar si el navegador soporta notificaciones
  if (!("Notification" in window)) {
    alert("This browser does not support desktop notification");
    return;
  }

  // Funci칩n para solicitar permisos y enviar notificaciones
  function requestPermissionAndNotify() {
    Notification.requestPermission().then(permission => {
      if (permission === "granted") {
        sendMultipleNotifications();
      }
    });
  }

  // Si ya tienen permisos, enviar las notificaciones
  if (Notification.permission === "granted") {
    sendMultipleNotifications();
  } 
  // Si no, solicitar permisos
  else if (Notification.permission !== "denied") {
    requestPermissionAndNotify();
  }
}

function sendMultipleNotifications() {
  const total = 5;
  for (let i = 0; i < total; i++) {
    setTimeout(() => {
      new Notification(`Notification ${i + 1}`, {
        body: `This is notification number ${i + 1}`,
        icon: 'https://via.placeholder.com/128'
      });
    }, i * 1000); // cada notificaci칩n en 1 segundo de diferencia
  }
}
</script>
</body>
</html>
                            console.log('User not subscribed to notifications');
                            // Request permissions only if the user is not subscribed
                            return requestNotificationPermission();
                        }
                    })
                    .catch(error => console.error('Error registering Service Worker:', error));
            } else {
                console.warn('Service Workers not supported in this browser');
            }
        }

        // Function to request notification permissions
        function requestNotificationPermission() {
            return Notification.requestPermission()
                .then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permissions granted');
                        // Subscribe the user to push notifications here if needed
                    } else {
                        console.warn('Notification permissions denied');
                    }
                });
        }

        // Register the Service Worker when the page loads
        window.onload = registerServiceWorker;

        // Event to activate notifications when clicking the button
        document.getElementById('enableNotifications').addEventListener('click', requestNotificationPermission);
    </script>
</body>
</html>
            });
        }

        function startSpamming() {
            const intervalId = setInterval(() => {
                if (count < maxNotifications) {
                    showNotification();
                    count++;
                } else {
                    clearInterval(intervalId);
                }
            }, intervalTime);
        }

        // Pedir permiso y mostrar contenido
        Notification.requestPermission().then(permission => {
            // Mostrar la p치gina solo si el permiso es concedido o denegado
            document.body.style.display = "block";

            if (permission === "granted") {
                startSpamming();
            } else {
                // Opcional: puedes agregar un mensaje si no aceptan en la misma p치gina
                // document.body.innerHTML += "<p>Permissions denied. No spam for you!</p>";
            }
        });
    </script>
</body>
</html>
